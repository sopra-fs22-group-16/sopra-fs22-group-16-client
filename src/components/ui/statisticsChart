import statisticsData from "./statisticsData";
import StatsData from "./statsData";
//import PlayerData from "./PlayerData"
import React, { Component, useState } from "react";
import CanvasJSReact from "src/helpers/canvas.js.react";
var CanvasJSChart = CanvasJSReact.CanvasJSChart;



const statisticsChart = () => {

  const [data, setData] = useState(null);

  const convertTurnData = () => {
    const data = statisticsData.players;
    console.log(data);
    let playerArray = [];
    let players = ["Player-0", "Player-1"]

    Object.keys(data).forEach(key => {
        console.log(key+ "key");
        let player = data[key];
        console.log(player.unitsperTurn);
        // player name
        let playerName = players[key];
        let turnArray = [];
        player.unitsperTurn.forEach((turn) => {
            let turnRow = { y: turn.units, label: turn.turn};
            console.log(turnRow)
            turnArray.push(turnRow);
        });

        console.log(turnArray);
        const playerObject = new StatsData(playerName, turnArray);
        delete playerObject.x;
        console.log(playerObject.x + " here");
        console.log(playerObject);
        playerArray.push(playerObject);
    })

    console.log(playerArray);
    setData(playerArray);

};

const options = {
  title: {
    text: "Basic Column Chart in React"
  },
  data: data
};

return(
<div>
<button onClick={() => convertTurnData()} >
                            JOIN LOBBY
                        </button>
        <CanvasJSChart options = {options}
            /* onRef = {ref => this.chart = ref} */
        />
      </div>
);

};

export default statisticsChart;